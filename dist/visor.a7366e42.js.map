{"version":3,"sources":["../node_modules/viewerjs/dist/viewer.js","js/visor.js"],"names":["global","factory","exports","module","define","amd","globalThis","self","Viewer","_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_defineProperty","value","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","DEFAULTS","backdrop","button","navbar","title","toolbar","className","container","fullscreen","inheritedAttributes","initialViewIndex","inline","interval","keyboard","focus","loading","loop","minWidth","minHeight","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","slideOnTouch","toggleOnDblclick","tooltip","transition","zIndex","zIndexInline","zoomRatio","minZoomRatio","maxZoomRatio","url","ready","show","shown","hide","hidden","view","viewed","move","moved","rotate","rotated","scale","scaled","zoom","zoomed","play","stop","IS_BROWSER","window","document","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","CLASS_ACTIVE","concat","CLASS_CLOSE","CLASS_FADE","CLASS_FIXED","CLASS_FULLSCREEN","CLASS_FULLSCREEN_EXIT","CLASS_HIDE","CLASS_HIDE_MD_DOWN","CLASS_HIDE_SM_DOWN","CLASS_HIDE_XS_DOWN","CLASS_IN","CLASS_INVISIBLE","CLASS_LOADING","CLASS_MOVE","CLASS_OPEN","CLASS_SHOW","CLASS_TRANSITION","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","DATA_ACTION","REGEXP_SPACES","BUTTONS","isString","isNaN","Number","isNumber","isUndefined","isObject","hasOwnProperty","isPlainObject","_constructor","call","error","isFunction","data","callback","Array","isArray","assign","_len","args","_key","arg","REGEXP_SUFFIX","setStyle","element","styles","style","property","test","hasClass","classList","contains","indexOf","addClass","elem","add","trim","removeClass","remove","replace","toggleClass","added","REGEXP_HYPHENATE","hyphenate","toLowerCase","getData","name","dataset","getAttribute","setData","setAttribute","onceSupported","supported","once","listener","options","get","set","addEventListener","removeEventListener","removeListener","type","undefined","handler","split","event","listeners","addListener","_handler","_element$listeners","_len2","_key2","dispatchEvent","Event","CustomEvent","bubbles","cancelable","detail","createEvent","initCustomEvent","getTransforms","_ref","scaleX","scaleY","translateX","translateY","values","transform","join","WebkitTransform","msTransform","IS_SAFARI","navigator","userAgent","getImageNaturalSizes","image","newImage","createElement","naturalWidth","naturalHeight","body","onload","width","height","removeChild","src","cssText","appendChild","getResponsiveClass","getPointer","_ref2","endOnly","pageX","pageY","end","endX","endY","timeStamp","Date","now","startX","startY","render","id","initContainer","initViewer","initList","renderViewer","initBody","ownerDocument","scrollbarWidth","innerWidth","clientWidth","initialBodyPaddingRight","paddingRight","initialBodyComputedPaddingRight","getComputedStyle","containerData","innerHeight","viewerData","parent","Math","max","offsetWidth","offsetHeight","parentData","fulled","viewer","_this","list","items","innerHTML","images","index","alt","getImageNameFromURL","decodeURIComponent","getImageURL","item","img","firstElementChild","loadImage","renderList","outerWidth","resetList","initImage","done","_this2","sizingImage","footerHeight","footer","viewerWidth","viewerHeight","oldImageData","imageData","imageInitializing","abort","aspectRatio","min","left","top","x","y","ratio","initialImageData","renderImage","_this3","marginLeft","marginTop","viewing","moving","rotating","scaling","zooming","onTransitionEnd","imageRendering","resetImage","parentNode","events","bind","canvas","onClick","click","onDragStart","dragstart","onPointerDown","pointerdown","onPointerMove","pointermove","onPointerUp","pointerup","onKeyDown","keydown","onResize","resize","onWheel","wheel","passive","capture","onDblclick","dblclick","unbind","handlers","action","localName","parentElement","isTrusted","clearTimeout","clickCanvasTimeout","played","exit","full","toggle","reset","prev","next","preventDefault","doubleClickImageTimeout","load","timeout","originalImage","parentWidth","parentHeight","filled","keyCode","which","charCode","ctrlKey","pointers","buttons","showing","hiding","pointerType","changedTouches","touch","identifier","pointerId","isSwitchable","change","pointer","imageClicked","setTimeout","isShown","close","open","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","player","getElementsByTagName","_this4","wheeling","delta","deltaY","wheelDelta","methods","immediate","build","transitioning","removeAttribute","initialOffsetWidth","hideImmediately","onViewerTransitionEnd","onImageTransitionEnd","zoomTo","querySelector","activeItem","onViewed","onLoad","complete","maxIndex","moveTo","_originalEvent","oldX","oldY","changed","originalEvent","degree","rotateTo","oldDegree","_scaleX","_scaleY","_this5","oldScaleX","oldScaleY","hasTooltip","_this6","_zoomable","newWidth","newHeight","oldRatio","offset","getOffset","box","getBoundingClientRect","pageXOffset","clientLeft","pageYOffset","clientTop","center","getPointersCenter","count","_ref3","_this7","total","onLoadWhenPlay","requestFullscreen","referrerPolicy","playing","_this8","exitFullscreen","_this9","enforceFocus","_this10","clearEnforceFocus","_this11","tooltipBox","textContent","round","tooltipping","fading","update","_this12","isImg","destroy","querySelectorAll","changedIndexes","changedIndex","destroyed","delaying","initializing","onStart","others","onFocusin","parseFloat","fucus","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","mozRequestFullScreen","msRequestFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","offsetX","offsetY","ACTION_MOVE","ACTION_ZOOM","getMaxZoomRatio","pointers2","ratios","pointer2","x1","abs","y1","x2","y2","z1","sqrt","sort","a","b","ACTION_SWITCH","absoluteOffsetX","p","AnotherViewer","getUniqueID","_classCallCheck","instance","Constructor","TypeError","nodeType","Error","init","_createClass","protoProps","staticProps","progress","template","custom","zoomButtons","slice","rotateButtons","scaleButtons","deep","size","rotates","position","insertBefore","nextSibling","gallery","getElementById"],"mappings":"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","file":"visor.a7366e42.js","sourceRoot":"../PEC2","sourcesContent":["/*!\n * Viewer.js v1.9.0\n * https://fengyuanchen.github.io/viewerjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2020-12-06T11:25:15.688Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Viewer = factory());\n}(this, (function () { 'use strict';\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  var DEFAULTS = {\n    /**\n     * Enable a modal backdrop, specify `static` for a backdrop\n     * which doesn't close the modal on click.\n     * @type {boolean}\n     */\n    backdrop: true,\n\n    /**\n     * Show the button on the top-right of the viewer.\n     * @type {boolean}\n     */\n    button: true,\n\n    /**\n     * Show the navbar.\n     * @type {boolean | number}\n     */\n    navbar: true,\n\n    /**\n     * Specify the visibility and the content of the title.\n     * @type {boolean | number | Function | Array}\n     */\n    title: true,\n\n    /**\n     * Show the toolbar.\n     * @type {boolean | number | Object}\n     */\n    toolbar: true,\n\n    /**\n     * Custom class name(s) to add to the viewer's root element.\n     * @type {string}\n     */\n    className: '',\n\n    /**\n     * Define where to put the viewer in modal mode.\n     * @type {string | Element}\n     */\n    container: 'body',\n\n    /**\n     * Filter the images for viewing. Return true if the image is viewable.\n     * @type {Function}\n     */\n    filter: null,\n\n    /**\n     * Enable to request fullscreen when play.\n     * @type {boolean}\n     */\n    fullscreen: true,\n\n    /**\n     * Define the extra attributes to inherit from the original image.\n     * @type {Array}\n     */\n    inheritedAttributes: ['crossOrigin', 'decoding', 'isMap', 'loading', 'referrerPolicy', 'sizes', 'srcset', 'useMap'],\n\n    /**\n     * Define the initial index of image for viewing.\n     * @type {number}\n     */\n    initialViewIndex: 0,\n\n    /**\n     * Enable inline mode.\n     * @type {boolean}\n     */\n    inline: false,\n\n    /**\n     * The amount of time to delay between automatically cycling an image when playing.\n     * @type {number}\n     */\n    interval: 5000,\n\n    /**\n     * Enable keyboard support.\n     * @type {boolean}\n     */\n    keyboard: true,\n\n    /**\n     * Focus the viewer when initialized.\n     * @type {boolean}\n     */\n    focus: true,\n\n    /**\n     * Indicate if show a loading spinner when load image or not.\n     * @type {boolean}\n     */\n    loading: true,\n\n    /**\n     * Indicate if enable loop viewing or not.\n     * @type {boolean}\n     */\n    loop: true,\n\n    /**\n     * Min width of the viewer in inline mode.\n     * @type {number}\n     */\n    minWidth: 200,\n\n    /**\n     * Min height of the viewer in inline mode.\n     * @type {number}\n     */\n    minHeight: 100,\n\n    /**\n     * Enable to move the image.\n     * @type {boolean}\n     */\n    movable: true,\n\n    /**\n     * Enable to rotate the image.\n     * @type {boolean}\n     */\n    rotatable: true,\n\n    /**\n     * Enable to scale the image.\n     * @type {boolean}\n     */\n    scalable: true,\n\n    /**\n     * Enable to zoom the image.\n     * @type {boolean}\n     */\n    zoomable: true,\n\n    /**\n     * Enable to zoom the current image by dragging on the touch screen.\n     * @type {boolean}\n     */\n    zoomOnTouch: true,\n\n    /**\n     * Enable to zoom the image by wheeling mouse.\n     * @type {boolean}\n     */\n    zoomOnWheel: true,\n\n    /**\n     * Enable to slide to the next or previous image by swiping on the touch screen.\n     * @type {boolean}\n     */\n    slideOnTouch: true,\n\n    /**\n     * Indicate if toggle the image size between its natural size\n     * and initial size when double click on the image or not.\n     * @type {boolean}\n     */\n    toggleOnDblclick: true,\n\n    /**\n     * Show the tooltip with image ratio (percentage) when zoom in or zoom out.\n     * @type {boolean}\n     */\n    tooltip: true,\n\n    /**\n     * Enable CSS3 Transition for some special elements.\n     * @type {boolean}\n     */\n    transition: true,\n\n    /**\n     * Define the CSS `z-index` value of viewer in modal mode.\n     * @type {number}\n     */\n    zIndex: 2015,\n\n    /**\n     * Define the CSS `z-index` value of viewer in inline mode.\n     * @type {number}\n     */\n    zIndexInline: 0,\n\n    /**\n     * Define the ratio when zoom the image by wheeling mouse.\n     * @type {number}\n     */\n    zoomRatio: 0.1,\n\n    /**\n     * Define the min ratio of the image when zoom out.\n     * @type {number}\n     */\n    minZoomRatio: 0.01,\n\n    /**\n     * Define the max ratio of the image when zoom in.\n     * @type {number}\n     */\n    maxZoomRatio: 100,\n\n    /**\n     * Define where to get the original image URL for viewing.\n     * @type {string | Function}\n     */\n    url: 'src',\n\n    /**\n     * Event shortcuts.\n     * @type {Function}\n     */\n    ready: null,\n    show: null,\n    shown: null,\n    hide: null,\n    hidden: null,\n    view: null,\n    viewed: null,\n    move: null,\n    moved: null,\n    rotate: null,\n    rotated: null,\n    scale: null,\n    scaled: null,\n    zoom: null,\n    zoomed: null,\n    play: null,\n    stop: null\n  };\n\n  var TEMPLATE = '<div class=\"viewer-container\" tabindex=\"-1\" touch-action=\"none\">' + '<div class=\"viewer-canvas\"></div>' + '<div class=\"viewer-footer\">' + '<div class=\"viewer-title\"></div>' + '<div class=\"viewer-toolbar\"></div>' + '<div class=\"viewer-navbar\">' + '<ul class=\"viewer-list\" role=\"navigation\"></ul>' + '</div>' + '</div>' + '<div class=\"viewer-tooltip\" role=\"alert\" aria-hidden=\"true\"></div>' + '<div class=\"viewer-button\" data-viewer-action=\"mix\" role=\"button\"></div>' + '<div class=\"viewer-player\"></div>' + '</div>';\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'viewer'; // Actions\n\n  var ACTION_MOVE = 'move';\n  var ACTION_SWITCH = 'switch';\n  var ACTION_ZOOM = 'zoom'; // Classes\n\n  var CLASS_ACTIVE = \"\".concat(NAMESPACE, \"-active\");\n  var CLASS_CLOSE = \"\".concat(NAMESPACE, \"-close\");\n  var CLASS_FADE = \"\".concat(NAMESPACE, \"-fade\");\n  var CLASS_FIXED = \"\".concat(NAMESPACE, \"-fixed\");\n  var CLASS_FULLSCREEN = \"\".concat(NAMESPACE, \"-fullscreen\");\n  var CLASS_FULLSCREEN_EXIT = \"\".concat(NAMESPACE, \"-fullscreen-exit\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_HIDE_MD_DOWN = \"\".concat(NAMESPACE, \"-hide-md-down\");\n  var CLASS_HIDE_SM_DOWN = \"\".concat(NAMESPACE, \"-hide-sm-down\");\n  var CLASS_HIDE_XS_DOWN = \"\".concat(NAMESPACE, \"-hide-xs-down\");\n  var CLASS_IN = \"\".concat(NAMESPACE, \"-in\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_LOADING = \"\".concat(NAMESPACE, \"-loading\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\");\n  var CLASS_OPEN = \"\".concat(NAMESPACE, \"-open\");\n  var CLASS_SHOW = \"\".concat(NAMESPACE, \"-show\");\n  var CLASS_TRANSITION = \"\".concat(NAMESPACE, \"-transition\"); // Native events\n\n  var EVENT_CLICK = 'click';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_DRAG_START = 'dragstart';\n  var EVENT_FOCUSIN = 'focusin';\n  var EVENT_KEY_DOWN = 'keydown';\n  var EVENT_LOAD = 'load';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_RESIZE = 'resize';\n  var EVENT_TRANSITION_END = 'transitionend';\n  var EVENT_WHEEL = 'wheel'; // Custom events\n\n  var EVENT_READY = 'ready';\n  var EVENT_SHOW = 'show';\n  var EVENT_SHOWN = 'shown';\n  var EVENT_HIDE = 'hide';\n  var EVENT_HIDDEN = 'hidden';\n  var EVENT_VIEW = 'view';\n  var EVENT_VIEWED = 'viewed';\n  var EVENT_MOVE = 'move';\n  var EVENT_MOVED = 'moved';\n  var EVENT_ROTATE = 'rotate';\n  var EVENT_ROTATED = 'rotated';\n  var EVENT_SCALE = 'scale';\n  var EVENT_SCALED = 'scaled';\n  var EVENT_ZOOM = 'zoom';\n  var EVENT_ZOOMED = 'zoomed';\n  var EVENT_PLAY = 'play';\n  var EVENT_STOP = 'stop'; // Data keys\n\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\"); // RegExps\n\n  var REGEXP_SPACES = /\\s\\s*/; // Misc\n\n  var BUTTONS = ['zoom-in', 'zoom-out', 'one-to-one', 'reset', 'prev', 'play', 'next', 'rotate-left', 'rotate-right', 'flip-horizontal', 'flip-vertical'];\n\n  /**\n   * Check if the given value is a string.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a string, else `false`.\n   */\n\n  function isString(value) {\n    return typeof value === 'string';\n  }\n  /**\n   * Check if the given value is not a number.\n   */\n\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length)\n      /* array-like */\n      ) {\n          var length = data.length;\n          var i;\n\n          for (i = 0; i < length; i += 1) {\n            if (callback.call(data, data[i], i, data) === false) {\n              break;\n            }\n          }\n        } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n\n    return data;\n  }\n  /**\n   * Extend the given object.\n   * @param {*} obj - The object to be extended.\n   * @param {*} args - The rest objects which will be merged to the first object.\n   * @returns {Object} The extended object.\n   */\n\n  var assign = Object.assign || function assign(obj) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (isObject(obj) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            obj[key] = arg[key];\n          });\n        }\n      });\n    }\n\n    return obj;\n  };\n  var REGEXP_SUFFIX = /^(?:width|height|left|top|marginLeft|marginTop)$/;\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value += 'px';\n      }\n\n      style[property] = value;\n    });\n  }\n  /**\n   * Escape a string for using in HTML.\n   * @param {String} value - The string to escape.\n   * @returns {String} Returns the escaped string.\n   */\n\n  function escapeHTMLEntities(value) {\n    return isString(value) ? value.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;') : value;\n  }\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n\n  function hasClass(element, value) {\n    if (!element || !value) {\n      return false;\n    }\n\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n\n  function addClass(element, value) {\n    if (!element || !value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n\n    var className = element.className.trim();\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n\n  function removeClass(element, value) {\n    if (!element || !value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n\n  function hyphenate(value) {\n    return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n  }\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute(\"data-\".concat(hyphenate(name)));\n  }\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(hyphenate(name)), data);\n    }\n  }\n\n  var onceSupported = function () {\n    var supported = false;\n\n    if (IS_BROWSER) {\n      var once = false;\n\n      var listener = function listener() {};\n\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n\n    return supported;\n  }();\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n\n      element.removeEventListener(event, handler, options);\n    });\n  }\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n            listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          listener.apply(element, args);\n        };\n\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n\n      element.addEventListener(event, _handler, options);\n    });\n  }\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @param {Object} options - The additional event options.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n\n  function dispatchEvent(element, type, data, options) {\n    var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, _objectSpread2({\n        bubbles: true,\n        cancelable: true,\n        detail: data\n      }, options));\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n\n    return element.dispatchEvent(event);\n  }\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n        scaleX = _ref.scaleX,\n        scaleY = _ref.scaleY,\n        translateX = _ref.translateX,\n        translateY = _ref.translateY;\n    var values = [];\n\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    } // Rotate should come first before scale to match orientation transform\n\n\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n  /**\n   * Get an image name from an image url.\n   * @param {string} url - The target url.\n   * @example\n   * // picture.jpg\n   * getImageNameFromURL('https://domain.com/path/to/picture.jpg?size=1280×960')\n   * @returns {string} A string contains the image name.\n   */\n\n  function getImageNameFromURL(url) {\n    return isString(url) ? decodeURIComponent(url.replace(/^.*\\//, '').replace(/[?&#].*$/, '')) : '';\n  }\n  var IS_SAFARI = WINDOW.navigator && /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(WINDOW.navigator.userAgent);\n  /**\n   * Get an image's natural sizes.\n   * @param {string} image - The target image.\n   * @param {Object} options - The viewer options.\n   * @param {Function} callback - The callback function.\n   * @returns {HTMLImageElement} The new image.\n   */\n\n  function getImageNaturalSizes(image, options, callback) {\n    var newImage = document.createElement('img'); // Modern browsers (except Safari)\n\n    if (image.naturalWidth && !IS_SAFARI) {\n      callback(image.naturalWidth, image.naturalHeight);\n      return newImage;\n    }\n\n    var body = document.body || document.documentElement;\n\n    newImage.onload = function () {\n      callback(newImage.width, newImage.height);\n\n      if (!IS_SAFARI) {\n        body.removeChild(newImage);\n      }\n    };\n\n    forEach(options.inheritedAttributes, function (name) {\n      var value = image.getAttribute(name);\n\n      if (value !== null) {\n        newImage.setAttribute(name, value);\n      }\n    });\n    newImage.src = image.src; // iOS Safari will convert the image automatically\n    // with its orientation once append it into DOM\n\n    if (!IS_SAFARI) {\n      newImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n      body.appendChild(newImage);\n    }\n\n    return newImage;\n  }\n  /**\n   * Get the related class name of a responsive type number.\n   * @param {string} type - The responsive type.\n   * @returns {string} The related class name.\n   */\n\n  function getResponsiveClass(type) {\n    switch (type) {\n      case 2:\n        return CLASS_HIDE_XS_DOWN;\n\n      case 3:\n        return CLASS_HIDE_SM_DOWN;\n\n      case 4:\n        return CLASS_HIDE_MD_DOWN;\n\n      default:\n        return '';\n    }\n  }\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n\n    var ratios = [];\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        ratios.push(ratio);\n      });\n    });\n    ratios.sort(function (a, b) {\n      return Math.abs(a) < Math.abs(b);\n    });\n    return ratios[0];\n  }\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n        pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      timeStamp: Date.now(),\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n          startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initViewer();\n      this.initList();\n      this.renderViewer();\n    },\n    initBody: function initBody() {\n      var ownerDocument = this.element.ownerDocument;\n      var body = ownerDocument.body || ownerDocument.documentElement;\n      this.body = body;\n      this.scrollbarWidth = window.innerWidth - ownerDocument.documentElement.clientWidth;\n      this.initialBodyPaddingRight = body.style.paddingRight;\n      this.initialBodyComputedPaddingRight = window.getComputedStyle(body).paddingRight;\n    },\n    initContainer: function initContainer() {\n      this.containerData = {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    },\n    initViewer: function initViewer() {\n      var options = this.options,\n          parent = this.parent;\n      var viewerData;\n\n      if (options.inline) {\n        viewerData = {\n          width: Math.max(parent.offsetWidth, options.minWidth),\n          height: Math.max(parent.offsetHeight, options.minHeight)\n        };\n        this.parentData = viewerData;\n      }\n\n      if (this.fulled || !viewerData) {\n        viewerData = this.containerData;\n      }\n\n      this.viewerData = assign({}, viewerData);\n    },\n    renderViewer: function renderViewer() {\n      if (this.options.inline && !this.fulled) {\n        setStyle(this.viewer, this.viewerData);\n      }\n    },\n    initList: function initList() {\n      var _this = this;\n\n      var element = this.element,\n          options = this.options,\n          list = this.list;\n      var items = []; // initList may be called in this.update, so should keep idempotent\n\n      list.innerHTML = '';\n      forEach(this.images, function (image, index) {\n        var src = image.src;\n        var alt = image.alt || getImageNameFromURL(src);\n\n        var url = _this.getImageURL(image);\n\n        if (src || url) {\n          var item = document.createElement('li');\n          var img = document.createElement('img');\n          forEach(options.inheritedAttributes, function (name) {\n            var value = image.getAttribute(name);\n\n            if (value !== null) {\n              img.setAttribute(name, value);\n            }\n          });\n          img.src = src || url;\n          img.alt = alt;\n          img.setAttribute('data-original-url', url || src);\n          item.setAttribute('data-index', index);\n          item.setAttribute('data-viewer-action', 'view');\n          item.setAttribute('role', 'button');\n\n          if (options.keyboard) {\n            item.setAttribute('tabindex', 0);\n          }\n\n          item.appendChild(img);\n          list.appendChild(item);\n          items.push(item);\n        }\n      });\n      this.items = items;\n      forEach(items, function (item) {\n        var image = item.firstElementChild;\n        setData(image, 'filled', true);\n\n        if (options.loading) {\n          addClass(item, CLASS_LOADING);\n        }\n\n        addListener(image, EVENT_LOAD, function (event) {\n          if (options.loading) {\n            removeClass(item, CLASS_LOADING);\n          }\n\n          _this.loadImage(event);\n        }, {\n          once: true\n        });\n      });\n\n      if (options.transition) {\n        addListener(element, EVENT_VIEWED, function () {\n          addClass(list, CLASS_TRANSITION);\n        }, {\n          once: true\n        });\n      }\n    },\n    renderList: function renderList(index) {\n      var i = index || this.index;\n      var width = this.items[i].offsetWidth || 30;\n      var outerWidth = width + 1; // 1 pixel of `margin-left` width\n      // Place the active item in the center of the screen\n\n      setStyle(this.list, assign({\n        width: outerWidth * this.length\n      }, getTransforms({\n        translateX: (this.viewerData.width - width) / 2 - outerWidth * i\n      })));\n    },\n    resetList: function resetList() {\n      var list = this.list;\n      list.innerHTML = '';\n      removeClass(list, CLASS_TRANSITION);\n      setStyle(list, getTransforms({\n        translateX: 0\n      }));\n    },\n    initImage: function initImage(done) {\n      var _this2 = this;\n\n      var options = this.options,\n          image = this.image,\n          viewerData = this.viewerData;\n      var footerHeight = this.footer.offsetHeight;\n      var viewerWidth = viewerData.width;\n      var viewerHeight = Math.max(viewerData.height - footerHeight, footerHeight);\n      var oldImageData = this.imageData || {};\n      var sizingImage;\n      this.imageInitializing = {\n        abort: function abort() {\n          sizingImage.onload = null;\n        }\n      };\n      sizingImage = getImageNaturalSizes(image, options, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = viewerWidth;\n        var height = viewerHeight;\n        _this2.imageInitializing = false;\n\n        if (viewerHeight * aspectRatio > viewerWidth) {\n          height = viewerWidth / aspectRatio;\n        } else {\n          width = viewerHeight * aspectRatio;\n        }\n\n        width = Math.min(width * 0.9, naturalWidth);\n        height = Math.min(height * 0.9, naturalHeight);\n        var left = (viewerWidth - width) / 2;\n        var top = (viewerHeight - height) / 2;\n        var imageData = {\n          left: left,\n          top: top,\n          x: left,\n          y: top,\n          width: width,\n          height: height,\n          ratio: width / naturalWidth,\n          aspectRatio: aspectRatio,\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight\n        };\n        var initialImageData = assign({}, imageData);\n\n        if (options.rotatable) {\n          imageData.rotate = oldImageData.rotate || 0;\n          initialImageData.rotate = 0;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = oldImageData.scaleX || 1;\n          imageData.scaleY = oldImageData.scaleY || 1;\n          initialImageData.scaleX = 1;\n          initialImageData.scaleY = 1;\n        }\n\n        _this2.imageData = imageData;\n        _this2.initialImageData = initialImageData;\n\n        if (done) {\n          done();\n        }\n      });\n    },\n    renderImage: function renderImage(done) {\n      var _this3 = this;\n\n      var image = this.image,\n          imageData = this.imageData;\n      setStyle(image, assign({\n        width: imageData.width,\n        height: imageData.height,\n        // XXX: Not to use translateX/Y to avoid image shaking when zooming\n        marginLeft: imageData.x,\n        marginTop: imageData.y\n      }, getTransforms(imageData)));\n\n      if (done) {\n        if ((this.viewing || this.moving || this.rotating || this.scaling || this.zooming) && this.options.transition && hasClass(image, CLASS_TRANSITION)) {\n          var onTransitionEnd = function onTransitionEnd() {\n            _this3.imageRendering = false;\n            done();\n          };\n\n          this.imageRendering = {\n            abort: function abort() {\n              removeListener(image, EVENT_TRANSITION_END, onTransitionEnd);\n            }\n          };\n          addListener(image, EVENT_TRANSITION_END, onTransitionEnd, {\n            once: true\n          });\n        } else {\n          done();\n        }\n      }\n    },\n    resetImage: function resetImage() {\n      // this.image only defined after viewed\n      if (this.viewing || this.viewed) {\n        var image = this.image;\n\n        if (this.viewing) {\n          this.viewing.abort();\n        }\n\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var options = this.options,\n          viewer = this.viewer,\n          canvas = this.canvas;\n      var document = this.element.ownerDocument;\n      addListener(viewer, EVENT_CLICK, this.onClick = this.click.bind(this));\n      addListener(viewer, EVENT_DRAG_START, this.onDragStart = this.dragstart.bind(this));\n      addListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown = this.pointerdown.bind(this));\n      addListener(document, EVENT_POINTER_MOVE, this.onPointerMove = this.pointermove.bind(this));\n      addListener(document, EVENT_POINTER_UP, this.onPointerUp = this.pointerup.bind(this));\n      addListener(document, EVENT_KEY_DOWN, this.onKeyDown = this.keydown.bind(this));\n      addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(viewer, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleOnDblclick) {\n        addListener(canvas, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var options = this.options,\n          viewer = this.viewer,\n          canvas = this.canvas;\n      var document = this.element.ownerDocument;\n      removeListener(viewer, EVENT_CLICK, this.onClick);\n      removeListener(viewer, EVENT_DRAG_START, this.onDragStart);\n      removeListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown);\n      removeListener(document, EVENT_POINTER_MOVE, this.onPointerMove);\n      removeListener(document, EVENT_POINTER_UP, this.onPointerUp);\n      removeListener(document, EVENT_KEY_DOWN, this.onKeyDown);\n      removeListener(window, EVENT_RESIZE, this.onResize);\n\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(viewer, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleOnDblclick) {\n        removeListener(canvas, EVENT_DBLCLICK, this.onDblclick);\n      }\n    }\n  };\n\n  var handlers = {\n    click: function click(event) {\n      var options = this.options,\n          imageData = this.imageData;\n      var target = event.target;\n      var action = getData(target, DATA_ACTION);\n\n      if (!action && target.localName === 'img' && target.parentElement.localName === 'li') {\n        target = target.parentElement;\n        action = getData(target, DATA_ACTION);\n      } // Cancel the emulated click when the native click event was triggered.\n\n\n      if (IS_TOUCH_DEVICE && event.isTrusted && target === this.canvas) {\n        clearTimeout(this.clickCanvasTimeout);\n      }\n\n      switch (action) {\n        case 'mix':\n          if (this.played) {\n            this.stop();\n          } else if (options.inline) {\n            if (this.fulled) {\n              this.exit();\n            } else {\n              this.full();\n            }\n          } else {\n            this.hide();\n          }\n\n          break;\n\n        case 'hide':\n          this.hide();\n          break;\n\n        case 'view':\n          this.view(getData(target, 'index'));\n          break;\n\n        case 'zoom-in':\n          this.zoom(0.1, true);\n          break;\n\n        case 'zoom-out':\n          this.zoom(-0.1, true);\n          break;\n\n        case 'one-to-one':\n          this.toggle();\n          break;\n\n        case 'reset':\n          this.reset();\n          break;\n\n        case 'prev':\n          this.prev(options.loop);\n          break;\n\n        case 'play':\n          this.play(options.fullscreen);\n          break;\n\n        case 'next':\n          this.next(options.loop);\n          break;\n\n        case 'rotate-left':\n          this.rotate(-90);\n          break;\n\n        case 'rotate-right':\n          this.rotate(90);\n          break;\n\n        case 'flip-horizontal':\n          this.scaleX(-imageData.scaleX || -1);\n          break;\n\n        case 'flip-vertical':\n          this.scaleY(-imageData.scaleY || -1);\n          break;\n\n        default:\n          if (this.played) {\n            this.stop();\n          }\n\n      }\n    },\n    dblclick: function dblclick(event) {\n      event.preventDefault();\n\n      if (this.viewed && event.target === this.image) {\n        // Cancel the emulated double click when the native dblclick event was triggered.\n        if (IS_TOUCH_DEVICE && event.isTrusted) {\n          clearTimeout(this.doubleClickImageTimeout);\n        }\n\n        this.toggle();\n      }\n    },\n    load: function load() {\n      var _this = this;\n\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = false;\n      }\n\n      var element = this.element,\n          options = this.options,\n          image = this.image,\n          index = this.index,\n          viewerData = this.viewerData;\n      removeClass(image, CLASS_INVISIBLE);\n\n      if (options.loading) {\n        removeClass(this.canvas, CLASS_LOADING);\n      }\n\n      image.style.cssText = 'height:0;' + \"margin-left:\".concat(viewerData.width / 2, \"px;\") + \"margin-top:\".concat(viewerData.height / 2, \"px;\") + 'max-width:none!important;' + 'position:absolute;' + 'width:0;';\n      this.initImage(function () {\n        toggleClass(image, CLASS_MOVE, options.movable);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n\n        _this.renderImage(function () {\n          _this.viewed = true;\n          _this.viewing = false;\n\n          if (isFunction(options.viewed)) {\n            addListener(element, EVENT_VIEWED, options.viewed, {\n              once: true\n            });\n          }\n\n          dispatchEvent(element, EVENT_VIEWED, {\n            originalImage: _this.images[index],\n            index: index,\n            image: image\n          }, {\n            cancelable: false\n          });\n        });\n      });\n    },\n    loadImage: function loadImage(event) {\n      var image = event.target;\n      var parent = image.parentNode;\n      var parentWidth = parent.offsetWidth || 30;\n      var parentHeight = parent.offsetHeight || 50;\n      var filled = !!getData(image, 'filled');\n      getImageNaturalSizes(image, this.options, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = parentWidth;\n        var height = parentHeight;\n\n        if (parentHeight * aspectRatio > parentWidth) {\n          if (filled) {\n            width = parentHeight * aspectRatio;\n          } else {\n            height = parentWidth / aspectRatio;\n          }\n        } else if (filled) {\n          height = parentWidth / aspectRatio;\n        } else {\n          width = parentHeight * aspectRatio;\n        }\n\n        setStyle(image, assign({\n          width: width,\n          height: height\n        }, getTransforms({\n          translateX: (parentWidth - width) / 2,\n          translateY: (parentHeight - height) / 2\n        })));\n      });\n    },\n    keydown: function keydown(event) {\n      var options = this.options;\n\n      if (!options.keyboard) {\n        return;\n      }\n\n      var keyCode = event.keyCode || event.which || event.charCode;\n\n      switch (keyCode) {\n        // Enter\n        case 13:\n          if (this.viewer.contains(event.target)) {\n            this.click(event);\n          }\n\n          break;\n      }\n\n      if (!this.fulled) {\n        return;\n      }\n\n      switch (keyCode) {\n        // Escape\n        case 27:\n          if (this.played) {\n            this.stop();\n          } else if (options.inline) {\n            if (this.fulled) {\n              this.exit();\n            }\n          } else {\n            this.hide();\n          }\n\n          break;\n        // Space\n\n        case 32:\n          if (this.played) {\n            this.stop();\n          }\n\n          break;\n        // ArrowLeft\n\n        case 37:\n          this.prev(options.loop);\n          break;\n        // ArrowUp\n\n        case 38:\n          // Prevent scroll on Firefox\n          event.preventDefault(); // Zoom in\n\n          this.zoom(options.zoomRatio, true);\n          break;\n        // ArrowRight\n\n        case 39:\n          this.next(options.loop);\n          break;\n        // ArrowDown\n\n        case 40:\n          // Prevent scroll on Firefox\n          event.preventDefault(); // Zoom out\n\n          this.zoom(-options.zoomRatio, true);\n          break;\n        // Ctrl + 0\n\n        case 48: // Fall through\n        // Ctrl + 1\n        // eslint-disable-next-line no-fallthrough\n\n        case 49:\n          if (event.ctrlKey) {\n            event.preventDefault();\n            this.toggle();\n          }\n\n          break;\n      }\n    },\n    dragstart: function dragstart(event) {\n      if (event.target.localName === 'img') {\n        event.preventDefault();\n      }\n    },\n    pointerdown: function pointerdown(event) {\n      var options = this.options,\n          pointers = this.pointers;\n      var buttons = event.buttons,\n          button = event.button;\n\n      if (!this.viewed || this.showing || this.viewing || this.hiding // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && ( // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu\n      || event.ctrlKey)) {\n        return;\n      } // Prevent default behaviours as page zooming in touch devices.\n\n\n      event.preventDefault();\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n\n      var action = options.movable ? ACTION_MOVE : false;\n\n      if (options.zoomOnTouch && options.zoomable && Object.keys(pointers).length > 1) {\n        action = ACTION_ZOOM;\n      } else if (options.slideOnTouch && (event.pointerType === 'touch' || event.type === 'touchstart') && this.isSwitchable()) {\n        action = ACTION_SWITCH;\n      }\n\n      if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n        removeClass(this.image, CLASS_TRANSITION);\n      }\n\n      this.action = action;\n    },\n    pointermove: function pointermove(event) {\n      var pointers = this.pointers,\n          action = this.action;\n\n      if (!this.viewed || !action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n\n      this.change(event);\n    },\n    pointerup: function pointerup(event) {\n      var _this2 = this;\n\n      var options = this.options,\n          action = this.action,\n          pointers = this.pointers;\n      var pointer;\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          pointer = pointers[touch.identifier];\n          delete pointers[touch.identifier];\n        });\n      } else {\n        pointer = pointers[event.pointerId || 0];\n        delete pointers[event.pointerId || 0];\n      }\n\n      if (!action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n        addClass(this.image, CLASS_TRANSITION);\n      }\n\n      this.action = false; // Emulate click and double click in touch devices to support backdrop and image zooming (#210).\n\n      if (IS_TOUCH_DEVICE && action !== ACTION_ZOOM && pointer && Date.now() - pointer.timeStamp < 500) {\n        clearTimeout(this.clickCanvasTimeout);\n        clearTimeout(this.doubleClickImageTimeout);\n\n        if (options.toggleOnDblclick && this.viewed && event.target === this.image) {\n          if (this.imageClicked) {\n            this.imageClicked = false; // This timeout will be cleared later when a native dblclick event is triggering\n\n            this.doubleClickImageTimeout = setTimeout(function () {\n              dispatchEvent(_this2.image, EVENT_DBLCLICK);\n            }, 50);\n          } else {\n            this.imageClicked = true; // The default timing of a double click in Windows is 500 ms\n\n            this.doubleClickImageTimeout = setTimeout(function () {\n              _this2.imageClicked = false;\n            }, 500);\n          }\n        } else {\n          this.imageClicked = false;\n\n          if (options.backdrop && options.backdrop !== 'static' && event.target === this.canvas) {\n            // This timeout will be cleared later when a native click event is triggering\n            this.clickCanvasTimeout = setTimeout(function () {\n              dispatchEvent(_this2.canvas, EVENT_CLICK);\n            }, 50);\n          }\n        }\n      }\n    },\n    resize: function resize() {\n      var _this3 = this;\n\n      if (!this.isShown || this.hiding) {\n        return;\n      }\n\n      if (this.fulled) {\n        this.close();\n        this.initBody();\n        this.open();\n      }\n\n      this.initContainer();\n      this.initViewer();\n      this.renderViewer();\n      this.renderList();\n\n      if (this.viewed) {\n        this.initImage(function () {\n          _this3.renderImage();\n        });\n      }\n\n      if (this.played) {\n        if (this.options.fullscreen && this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n          this.stop();\n          return;\n        }\n\n        forEach(this.player.getElementsByTagName('img'), function (image) {\n          addListener(image, EVENT_LOAD, _this3.loadImage.bind(_this3), {\n            once: true\n          });\n          dispatchEvent(image, EVENT_LOAD);\n        });\n      }\n    },\n    wheel: function wheel(event) {\n      var _this4 = this;\n\n      if (!this.viewed) {\n        return;\n      }\n\n      event.preventDefault(); // Limit wheel speed to prevent zoom too fast\n\n      if (this.wheeling) {\n        return;\n      }\n\n      this.wheeling = true;\n      setTimeout(function () {\n        _this4.wheeling = false;\n      }, 50);\n      var ratio = Number(this.options.zoomRatio) || 0.1;\n      var delta = 1;\n\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n\n      this.zoom(-delta * ratio, true, event);\n    }\n  };\n\n  var methods = {\n    /** Show the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if show the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    show: function show() {\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var element = this.element,\n          options = this.options;\n\n      if (options.inline || this.showing || this.isShown || this.showing) {\n        return this;\n      }\n\n      if (!this.ready) {\n        this.build();\n\n        if (this.ready) {\n          this.show(immediate);\n        }\n\n        return this;\n      }\n\n      if (isFunction(options.show)) {\n        addListener(element, EVENT_SHOW, options.show, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_SHOW) === false || !this.ready) {\n        return this;\n      }\n\n      if (this.hiding) {\n        this.transitioning.abort();\n      }\n\n      this.showing = true;\n      this.open();\n      var viewer = this.viewer;\n      removeClass(viewer, CLASS_HIDE);\n      viewer.setAttribute('role', 'dialog');\n      viewer.setAttribute('aria-labelledby', this.title.id);\n      viewer.setAttribute('aria-modal', true);\n      viewer.removeAttribute('aria-hidden');\n\n      if (options.transition && !immediate) {\n        var shown = this.shown.bind(this);\n        this.transitioning = {\n          abort: function abort() {\n            removeListener(viewer, EVENT_TRANSITION_END, shown);\n            removeClass(viewer, CLASS_IN);\n          }\n        };\n        addClass(viewer, CLASS_TRANSITION); // Force reflow to enable CSS3 transition\n\n        viewer.initialOffsetWidth = viewer.offsetWidth;\n        addListener(viewer, EVENT_TRANSITION_END, shown, {\n          once: true\n        });\n        addClass(viewer, CLASS_IN);\n      } else {\n        addClass(viewer, CLASS_IN);\n        this.shown();\n      }\n\n      return this;\n    },\n\n    /**\n     * Hide the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if hide the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    hide: function hide() {\n      var _this = this;\n\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var element = this.element,\n          options = this.options;\n\n      if (options.inline || this.hiding || !(this.isShown || this.showing)) {\n        return this;\n      }\n\n      if (isFunction(options.hide)) {\n        addListener(element, EVENT_HIDE, options.hide, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_HIDE) === false) {\n        return this;\n      }\n\n      if (this.showing) {\n        this.transitioning.abort();\n      }\n\n      this.hiding = true;\n\n      if (this.played) {\n        this.stop();\n      } else if (this.viewing) {\n        this.viewing.abort();\n      }\n\n      var viewer = this.viewer,\n          image = this.image;\n\n      var hideImmediately = function hideImmediately() {\n        removeClass(viewer, CLASS_IN);\n\n        _this.hidden();\n      };\n\n      if (options.transition && !immediate) {\n        var onViewerTransitionEnd = function onViewerTransitionEnd(event) {\n          // Ignore all propagating `transitionend` events (#275).\n          if (event && event.target === viewer) {\n            removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n\n            _this.hidden();\n          }\n        };\n\n        var onImageTransitionEnd = function onImageTransitionEnd() {\n          // In case of show the viewer by `viewer.show(true)` previously (#407).\n          if (hasClass(viewer, CLASS_TRANSITION)) {\n            addListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n            removeClass(viewer, CLASS_IN);\n          } else {\n            hideImmediately();\n          }\n        };\n\n        this.transitioning = {\n          abort: function abort() {\n            if (_this.viewed && hasClass(image, CLASS_TRANSITION)) {\n              removeListener(image, EVENT_TRANSITION_END, onImageTransitionEnd);\n            } else if (hasClass(viewer, CLASS_TRANSITION)) {\n              removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n            }\n          }\n        }; // In case of hiding the viewer when holding on the image (#255),\n        // note that the `CLASS_TRANSITION` class will be removed on pointer down.\n\n        if (this.viewed && hasClass(image, CLASS_TRANSITION)) {\n          addListener(image, EVENT_TRANSITION_END, onImageTransitionEnd, {\n            once: true\n          });\n          this.zoomTo(0, false, false, true);\n        } else {\n          onImageTransitionEnd();\n        }\n      } else {\n        hideImmediately();\n      }\n\n      return this;\n    },\n\n    /**\n     * View one of the images with image's index\n     * @param {number} index - The index of the image to view.\n     * @returns {Viewer} this\n     */\n    view: function view() {\n      var _this2 = this;\n\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.initialViewIndex;\n      index = Number(index) || 0;\n\n      if (this.hiding || this.played || index < 0 || index >= this.length || this.viewed && index === this.index) {\n        return this;\n      }\n\n      if (!this.isShown) {\n        this.index = index;\n        return this.show();\n      }\n\n      if (this.viewing) {\n        this.viewing.abort();\n      }\n\n      var element = this.element,\n          options = this.options,\n          title = this.title,\n          canvas = this.canvas;\n      var item = this.items[index];\n      var img = item.querySelector('img');\n      var url = getData(img, 'originalUrl');\n      var alt = img.getAttribute('alt');\n      var image = document.createElement('img');\n      forEach(options.inheritedAttributes, function (name) {\n        var value = img.getAttribute(name);\n\n        if (value !== null) {\n          image.setAttribute(name, value);\n        }\n      });\n      image.src = url;\n      image.alt = alt;\n\n      if (isFunction(options.view)) {\n        addListener(element, EVENT_VIEW, options.view, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_VIEW, {\n        originalImage: this.images[index],\n        index: index,\n        image: image\n      }) === false || !this.isShown || this.hiding || this.played) {\n        return this;\n      }\n\n      var activeItem = this.items[this.index];\n      removeClass(activeItem, CLASS_ACTIVE);\n      activeItem.removeAttribute('aria-selected');\n      addClass(item, CLASS_ACTIVE);\n      item.setAttribute('aria-selected', true);\n\n      if (options.focus) {\n        item.focus();\n      }\n\n      this.image = image;\n      this.viewed = false;\n      this.index = index;\n      this.imageData = {};\n      addClass(image, CLASS_INVISIBLE);\n\n      if (options.loading) {\n        addClass(canvas, CLASS_LOADING);\n      }\n\n      canvas.innerHTML = '';\n      canvas.appendChild(image); // Center current item\n\n      this.renderList(); // Clear title\n\n      title.innerHTML = ''; // Generate title after viewed\n\n      var onViewed = function onViewed() {\n        var imageData = _this2.imageData;\n        var render = Array.isArray(options.title) ? options.title[1] : options.title;\n        title.innerHTML = escapeHTMLEntities(isFunction(render) ? render.call(_this2, image, imageData) : \"\".concat(alt, \" (\").concat(imageData.naturalWidth, \" \\xD7 \").concat(imageData.naturalHeight, \")\"));\n      };\n\n      var onLoad;\n      addListener(element, EVENT_VIEWED, onViewed, {\n        once: true\n      });\n      this.viewing = {\n        abort: function abort() {\n          removeListener(element, EVENT_VIEWED, onViewed);\n\n          if (image.complete) {\n            if (_this2.imageRendering) {\n              _this2.imageRendering.abort();\n            } else if (_this2.imageInitializing) {\n              _this2.imageInitializing.abort();\n            }\n          } else {\n            // Cancel download to save bandwidth.\n            image.src = '';\n            removeListener(image, EVENT_LOAD, onLoad);\n\n            if (_this2.timeout) {\n              clearTimeout(_this2.timeout);\n            }\n          }\n        }\n      };\n\n      if (image.complete) {\n        this.load();\n      } else {\n        addListener(image, EVENT_LOAD, onLoad = this.load.bind(this), {\n          once: true\n        });\n\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n        } // Make the image visible if it fails to load within 1s\n\n\n        this.timeout = setTimeout(function () {\n          removeClass(image, CLASS_INVISIBLE);\n          _this2.timeout = false;\n        }, 1000);\n      }\n\n      return this;\n    },\n\n    /**\n     * View the previous image\n     * @param {boolean} [loop=false] - Indicate if view the last one\n     * when it is the first one at present.\n     * @returns {Viewer} this\n     */\n    prev: function prev() {\n      var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var index = this.index - 1;\n\n      if (index < 0) {\n        index = loop ? this.length - 1 : 0;\n      }\n\n      this.view(index);\n      return this;\n    },\n\n    /**\n     * View the next image\n     * @param {boolean} [loop=false] - Indicate if view the first one\n     * when it is the last one at present.\n     * @returns {Viewer} this\n     */\n    next: function next() {\n      var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var maxIndex = this.length - 1;\n      var index = this.index + 1;\n\n      if (index > maxIndex) {\n        index = loop ? 0 : maxIndex;\n      }\n\n      this.view(index);\n      return this;\n    },\n\n    /**\n     * Move the image with relative offsets.\n     * @param {number} x - The moving distance in the horizontal direction.\n     * @param {number} [y=x] The moving distance in the vertical direction.\n     * @returns {Viewer} this\n     */\n    move: function move(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var imageData = this.imageData;\n      this.moveTo(isUndefined(x) ? x : imageData.x + Number(x), isUndefined(y) ? y : imageData.y + Number(y));\n      return this;\n    },\n\n    /**\n     * Move the image to an absolute point.\n     * @param {number} x - The new position in the horizontal direction.\n     * @param {number} [y=x] - The new position in the vertical direction.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    moveTo: function moveTo(x) {\n      var _this3 = this;\n\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n\n      var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      var element = this.element,\n          options = this.options,\n          imageData = this.imageData;\n      x = Number(x);\n      y = Number(y);\n\n      if (this.viewed && !this.played && options.movable) {\n        var oldX = imageData.x;\n        var oldY = imageData.y;\n        var changed = false;\n\n        if (isNumber(x)) {\n          changed = true;\n        } else {\n          x = oldX;\n        }\n\n        if (isNumber(y)) {\n          changed = true;\n        } else {\n          y = oldY;\n        }\n\n        if (changed) {\n          if (isFunction(options.move)) {\n            addListener(element, EVENT_MOVE, options.move, {\n              once: true\n            });\n          }\n\n          if (dispatchEvent(element, EVENT_MOVE, {\n            x: x,\n            y: y,\n            oldX: oldX,\n            oldY: oldY,\n            originalEvent: _originalEvent\n          }) === false) {\n            return this;\n          }\n\n          imageData.x = x;\n          imageData.y = y;\n          imageData.left = x;\n          imageData.top = y;\n          this.moving = true;\n          this.renderImage(function () {\n            _this3.moving = false;\n\n            if (isFunction(options.moved)) {\n              addListener(element, EVENT_MOVED, options.moved, {\n                once: true\n              });\n            }\n\n            dispatchEvent(element, EVENT_MOVED, {\n              x: x,\n              y: y,\n              oldX: oldX,\n              oldY: oldY,\n              originalEvent: _originalEvent\n            }, {\n              cancelable: false\n            });\n          });\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Rotate the image with a relative degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotate: function rotate(degree) {\n      this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n      return this;\n    },\n\n    /**\n     * Rotate the image to an absolute degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotateTo: function rotateTo(degree) {\n      var _this4 = this;\n\n      var element = this.element,\n          options = this.options,\n          imageData = this.imageData;\n      degree = Number(degree);\n\n      if (isNumber(degree) && this.viewed && !this.played && options.rotatable) {\n        var oldDegree = imageData.rotate;\n\n        if (isFunction(options.rotate)) {\n          addListener(element, EVENT_ROTATE, options.rotate, {\n            once: true\n          });\n        }\n\n        if (dispatchEvent(element, EVENT_ROTATE, {\n          degree: degree,\n          oldDegree: oldDegree\n        }) === false) {\n          return this;\n        }\n\n        imageData.rotate = degree;\n        this.rotating = true;\n        this.renderImage(function () {\n          _this4.rotating = false;\n\n          if (isFunction(options.rotated)) {\n            addListener(element, EVENT_ROTATED, options.rotated, {\n              once: true\n            });\n          }\n\n          dispatchEvent(element, EVENT_ROTATED, {\n            degree: degree,\n            oldDegree: oldDegree\n          }, {\n            cancelable: false\n          });\n        });\n      }\n\n      return this;\n    },\n\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Viewer} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      this.scale(_scaleX, this.imageData.scaleY);\n      return this;\n    },\n\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      this.scale(this.imageData.scaleX, _scaleY);\n      return this;\n    },\n\n    /**\n     * Scale the image.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scale: function scale(scaleX) {\n      var _this5 = this;\n\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var element = this.element,\n          options = this.options,\n          imageData = this.imageData;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (this.viewed && !this.played && options.scalable) {\n        var oldScaleX = imageData.scaleX;\n        var oldScaleY = imageData.scaleY;\n        var changed = false;\n\n        if (isNumber(scaleX)) {\n          changed = true;\n        } else {\n          scaleX = oldScaleX;\n        }\n\n        if (isNumber(scaleY)) {\n          changed = true;\n        } else {\n          scaleY = oldScaleY;\n        }\n\n        if (changed) {\n          if (isFunction(options.scale)) {\n            addListener(element, EVENT_SCALE, options.scale, {\n              once: true\n            });\n          }\n\n          if (dispatchEvent(element, EVENT_SCALE, {\n            scaleX: scaleX,\n            scaleY: scaleY,\n            oldScaleX: oldScaleX,\n            oldScaleY: oldScaleY\n          }) === false) {\n            return this;\n          }\n\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n          this.scaling = true;\n          this.renderImage(function () {\n            _this5.scaling = false;\n\n            if (isFunction(options.scaled)) {\n              addListener(element, EVENT_SCALED, options.scaled, {\n                once: true\n              });\n            }\n\n            dispatchEvent(element, EVENT_SCALED, {\n              scaleX: scaleX,\n              scaleY: scaleY,\n              oldScaleX: oldScaleX,\n              oldScaleY: oldScaleY\n            }, {\n              cancelable: false\n            });\n          });\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Zoom the image with a relative ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    zoom: function zoom(ratio) {\n      var hasTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      var imageData = this.imageData;\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      this.zoomTo(imageData.width * ratio / imageData.naturalWidth, hasTooltip, _originalEvent);\n      return this;\n    },\n\n    /**\n     * Zoom the image to an absolute ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @param {Event} [_zoomable=false] - Indicates if the current zoom is available or not.\n     * @returns {Viewer} this\n     */\n    zoomTo: function zoomTo(ratio) {\n      var _this6 = this;\n\n      var hasTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      var _zoomable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      var element = this.element,\n          options = this.options,\n          pointers = this.pointers,\n          imageData = this.imageData;\n      var x = imageData.x,\n          y = imageData.y,\n          width = imageData.width,\n          height = imageData.height,\n          naturalWidth = imageData.naturalWidth,\n          naturalHeight = imageData.naturalHeight;\n      ratio = Math.max(0, ratio);\n\n      if (isNumber(ratio) && this.viewed && !this.played && (_zoomable || options.zoomable)) {\n        if (!_zoomable) {\n          var minZoomRatio = Math.max(0.01, options.minZoomRatio);\n          var maxZoomRatio = Math.min(100, options.maxZoomRatio);\n          ratio = Math.min(Math.max(ratio, minZoomRatio), maxZoomRatio);\n        }\n\n        if (_originalEvent && options.zoomRatio >= 0.055 && ratio > 0.95 && ratio < 1.05) {\n          ratio = 1;\n        }\n\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n        var offsetWidth = newWidth - width;\n        var offsetHeight = newHeight - height;\n        var oldRatio = width / naturalWidth;\n\n        if (isFunction(options.zoom)) {\n          addListener(element, EVENT_ZOOM, options.zoom, {\n            once: true\n          });\n        }\n\n        if (dispatchEvent(element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: oldRatio,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n\n        this.zooming = true;\n\n        if (_originalEvent) {\n          var offset = getOffset(this.viewer);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          }; // Zoom from the triggering point of the event\n\n          imageData.x -= offsetWidth * ((center.pageX - offset.left - x) / width);\n          imageData.y -= offsetHeight * ((center.pageY - offset.top - y) / height);\n        } else {\n          // Zoom from the center of the image\n          imageData.x -= offsetWidth / 2;\n          imageData.y -= offsetHeight / 2;\n        }\n\n        imageData.left = imageData.x;\n        imageData.top = imageData.y;\n        imageData.width = newWidth;\n        imageData.height = newHeight;\n        imageData.ratio = ratio;\n        this.renderImage(function () {\n          _this6.zooming = false;\n\n          if (isFunction(options.zoomed)) {\n            addListener(element, EVENT_ZOOMED, options.zoomed, {\n              once: true\n            });\n          }\n\n          dispatchEvent(element, EVENT_ZOOMED, {\n            ratio: ratio,\n            oldRatio: oldRatio,\n            originalEvent: _originalEvent\n          }, {\n            cancelable: false\n          });\n        });\n\n        if (hasTooltip) {\n          this.tooltip();\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Play the images\n     * @param {boolean} [fullscreen=false] - Indicate if request fullscreen or not.\n     * @returns {Viewer} this\n     */\n    play: function play() {\n      var _this7 = this;\n\n      var fullscreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (!this.isShown || this.played) {\n        return this;\n      }\n\n      var element = this.element,\n          options = this.options;\n\n      if (isFunction(options.play)) {\n        addListener(element, EVENT_PLAY, options.play, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_PLAY) === false) {\n        return this;\n      }\n\n      var player = this.player;\n      var onLoad = this.loadImage.bind(this);\n      var list = [];\n      var total = 0;\n      var index = 0;\n      this.played = true;\n      this.onLoadWhenPlay = onLoad;\n\n      if (fullscreen) {\n        this.requestFullscreen();\n      }\n\n      addClass(player, CLASS_SHOW);\n      forEach(this.items, function (item, i) {\n        var img = item.querySelector('img');\n        var image = document.createElement('img');\n        image.src = getData(img, 'originalUrl');\n        image.alt = img.getAttribute('alt');\n        image.referrerPolicy = img.referrerPolicy;\n        total += 1;\n        addClass(image, CLASS_FADE);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n\n        if (hasClass(item, CLASS_ACTIVE)) {\n          addClass(image, CLASS_IN);\n          index = i;\n        }\n\n        list.push(image);\n        addListener(image, EVENT_LOAD, onLoad, {\n          once: true\n        });\n        player.appendChild(image);\n      });\n\n      if (isNumber(options.interval) && options.interval > 0) {\n        var play = function play() {\n          _this7.playing = setTimeout(function () {\n            removeClass(list[index], CLASS_IN);\n            index += 1;\n            index = index < total ? index : 0;\n            addClass(list[index], CLASS_IN);\n            play();\n          }, options.interval);\n        };\n\n        if (total > 1) {\n          play();\n        }\n      }\n\n      return this;\n    },\n    // Stop play\n    stop: function stop() {\n      var _this8 = this;\n\n      if (!this.played) {\n        return this;\n      }\n\n      var element = this.element,\n          options = this.options;\n\n      if (isFunction(options.stop)) {\n        addListener(element, EVENT_STOP, options.stop, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_STOP) === false) {\n        return this;\n      }\n\n      var player = this.player;\n      this.played = false;\n      clearTimeout(this.playing);\n      forEach(player.getElementsByTagName('img'), function (image) {\n        removeListener(image, EVENT_LOAD, _this8.onLoadWhenPlay);\n      });\n      removeClass(player, CLASS_SHOW);\n      player.innerHTML = '';\n      this.exitFullscreen();\n      return this;\n    },\n    // Enter modal mode (only available in inline mode)\n    full: function full() {\n      var _this9 = this;\n\n      var options = this.options,\n          viewer = this.viewer,\n          image = this.image,\n          list = this.list;\n\n      if (!this.isShown || this.played || this.fulled || !options.inline) {\n        return this;\n      }\n\n      this.fulled = true;\n      this.open();\n      addClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(list, CLASS_TRANSITION);\n\n        if (this.viewed) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n      }\n\n      addClass(viewer, CLASS_FIXED);\n      viewer.setAttribute('role', 'dialog');\n      viewer.setAttribute('aria-labelledby', this.title.id);\n      viewer.setAttribute('aria-modal', true);\n      viewer.removeAttribute('style');\n      setStyle(viewer, {\n        zIndex: options.zIndex\n      });\n\n      if (options.focus) {\n        this.enforceFocus();\n      }\n\n      this.initContainer();\n      this.viewerData = assign({}, this.containerData);\n      this.renderList();\n\n      if (this.viewed) {\n        this.initImage(function () {\n          _this9.renderImage(function () {\n            if (options.transition) {\n              setTimeout(function () {\n                addClass(image, CLASS_TRANSITION);\n                addClass(list, CLASS_TRANSITION);\n              }, 0);\n            }\n          });\n        });\n      }\n\n      return this;\n    },\n    // Exit modal mode (only available in inline mode)\n    exit: function exit() {\n      var _this10 = this;\n\n      var options = this.options,\n          viewer = this.viewer,\n          image = this.image,\n          list = this.list;\n\n      if (!this.isShown || this.played || !this.fulled || !options.inline) {\n        return this;\n      }\n\n      this.fulled = false;\n      this.close();\n      removeClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(list, CLASS_TRANSITION);\n\n        if (this.viewed) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n      }\n\n      if (options.focus) {\n        this.clearEnforceFocus();\n      }\n\n      viewer.removeAttribute('role');\n      viewer.removeAttribute('aria-labelledby');\n      viewer.removeAttribute('aria-modal');\n      removeClass(viewer, CLASS_FIXED);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline\n      });\n      this.viewerData = assign({}, this.parentData);\n      this.renderViewer();\n      this.renderList();\n\n      if (this.viewed) {\n        this.initImage(function () {\n          _this10.renderImage(function () {\n            if (options.transition) {\n              setTimeout(function () {\n                addClass(image, CLASS_TRANSITION);\n                addClass(list, CLASS_TRANSITION);\n              }, 0);\n            }\n          });\n        });\n      }\n\n      return this;\n    },\n    // Show the current ratio of the image with percentage\n    tooltip: function tooltip() {\n      var _this11 = this;\n\n      var options = this.options,\n          tooltipBox = this.tooltipBox,\n          imageData = this.imageData;\n\n      if (!this.viewed || this.played || !options.tooltip) {\n        return this;\n      }\n\n      tooltipBox.textContent = \"\".concat(Math.round(imageData.ratio * 100), \"%\");\n\n      if (!this.tooltipping) {\n        if (options.transition) {\n          if (this.fading) {\n            dispatchEvent(tooltipBox, EVENT_TRANSITION_END);\n          }\n\n          addClass(tooltipBox, CLASS_SHOW);\n          addClass(tooltipBox, CLASS_FADE);\n          addClass(tooltipBox, CLASS_TRANSITION);\n          tooltipBox.removeAttribute('aria-hidden'); // Force reflow to enable CSS3 transition\n\n          tooltipBox.initialOffsetWidth = tooltipBox.offsetWidth;\n          addClass(tooltipBox, CLASS_IN);\n        } else {\n          addClass(tooltipBox, CLASS_SHOW);\n          tooltipBox.removeAttribute('aria-hidden');\n        }\n      } else {\n        clearTimeout(this.tooltipping);\n      }\n\n      this.tooltipping = setTimeout(function () {\n        if (options.transition) {\n          addListener(tooltipBox, EVENT_TRANSITION_END, function () {\n            removeClass(tooltipBox, CLASS_SHOW);\n            removeClass(tooltipBox, CLASS_FADE);\n            removeClass(tooltipBox, CLASS_TRANSITION);\n            tooltipBox.setAttribute('aria-hidden', true);\n            _this11.fading = false;\n          }, {\n            once: true\n          });\n          removeClass(tooltipBox, CLASS_IN);\n          _this11.fading = true;\n        } else {\n          removeClass(tooltipBox, CLASS_SHOW);\n          tooltipBox.setAttribute('aria-hidden', true);\n        }\n\n        _this11.tooltipping = false;\n      }, 1000);\n      return this;\n    },\n    // Toggle the image size between its natural size and initial size\n    toggle: function toggle() {\n      if (this.imageData.ratio === 1) {\n        this.zoomTo(this.initialImageData.ratio, true);\n      } else {\n        this.zoomTo(1, true);\n      }\n\n      return this;\n    },\n    // Reset the image to its initial state\n    reset: function reset() {\n      if (this.viewed && !this.played) {\n        this.imageData = assign({}, this.initialImageData);\n        this.renderImage();\n      }\n\n      return this;\n    },\n    // Update viewer when images changed\n    update: function update() {\n      var _this12 = this;\n\n      var element = this.element,\n          options = this.options,\n          isImg = this.isImg; // Destroy viewer if the target image was deleted\n\n      if (isImg && !element.parentNode) {\n        return this.destroy();\n      }\n\n      var images = [];\n      forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n        if (isFunction(options.filter)) {\n          if (options.filter.call(_this12, image)) {\n            images.push(image);\n          }\n        } else if (_this12.getImageURL(image)) {\n          images.push(image);\n        }\n      });\n\n      if (!images.length) {\n        return this;\n      }\n\n      this.images = images;\n      this.length = images.length;\n\n      if (this.ready) {\n        var changedIndexes = [];\n        forEach(this.items, function (item, i) {\n          var img = item.querySelector('img');\n          var image = images[i];\n\n          if (image && img) {\n            if (image.src !== img.src // Title changed (#408)\n            || image.alt !== img.alt) {\n              changedIndexes.push(i);\n            }\n          } else {\n            changedIndexes.push(i);\n          }\n        });\n        setStyle(this.list, {\n          width: 'auto'\n        });\n        this.initList();\n\n        if (this.isShown) {\n          if (this.length) {\n            if (this.viewed) {\n              var changedIndex = changedIndexes.indexOf(this.index);\n\n              if (changedIndex >= 0) {\n                this.viewed = false;\n                this.view(Math.max(Math.min(this.index - changedIndex, this.length - 1), 0));\n              } else {\n                var activeItem = this.items[this.index]; // Reactivate the current viewing item after reset the list.\n\n                addClass(activeItem, CLASS_ACTIVE);\n                activeItem.setAttribute('aria-selected', true);\n              }\n            }\n          } else {\n            this.image = null;\n            this.viewed = false;\n            this.index = 0;\n            this.imageData = {};\n            this.canvas.innerHTML = '';\n            this.title.innerHTML = '';\n          }\n        }\n      } else {\n        this.build();\n      }\n\n      return this;\n    },\n    // Destroy the viewer\n    destroy: function destroy() {\n      var element = this.element,\n          options = this.options;\n\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n\n      this.destroyed = true;\n\n      if (this.ready) {\n        if (this.played) {\n          this.stop();\n        }\n\n        if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          }\n\n          this.unbind();\n        } else if (this.isShown) {\n          if (this.viewing) {\n            if (this.imageRendering) {\n              this.imageRendering.abort();\n            } else if (this.imageInitializing) {\n              this.imageInitializing.abort();\n            }\n          }\n\n          if (this.hiding) {\n            this.transitioning.abort();\n          }\n\n          this.hidden();\n        } else if (this.showing) {\n          this.transitioning.abort();\n          this.hidden();\n        }\n\n        this.ready = false;\n        this.viewer.parentNode.removeChild(this.viewer);\n      } else if (options.inline) {\n        if (this.delaying) {\n          this.delaying.abort();\n        } else if (this.initializing) {\n          this.initializing.abort();\n        }\n      }\n\n      if (!options.inline) {\n        removeListener(element, EVENT_CLICK, this.onStart);\n      }\n\n      element[NAMESPACE] = undefined;\n      return this;\n    }\n  };\n\n  var others = {\n    getImageURL: function getImageURL(image) {\n      var url = this.options.url;\n\n      if (isString(url)) {\n        url = image.getAttribute(url);\n      } else if (isFunction(url)) {\n        url = url.call(this, image);\n      } else {\n        url = '';\n      }\n\n      return url;\n    },\n    enforceFocus: function enforceFocus() {\n      var _this = this;\n\n      this.clearEnforceFocus();\n      addListener(document, EVENT_FOCUSIN, this.onFocusin = function (_ref) {\n        var target = _ref.target;\n        var viewer = _this.viewer;\n\n        if (target !== document && target !== viewer && !viewer.contains(target)) {\n          viewer.focus();\n        }\n      });\n    },\n    clearEnforceFocus: function clearEnforceFocus() {\n      if (this.onFocusin) {\n        removeListener(document, EVENT_FOCUSIN, this.onFocusin);\n        this.onFocusin = null;\n      }\n    },\n    open: function open() {\n      var body = this.body;\n      addClass(body, CLASS_OPEN);\n      body.style.paddingRight = \"\".concat(this.scrollbarWidth + (parseFloat(this.initialBodyComputedPaddingRight) || 0), \"px\");\n    },\n    close: function close() {\n      var body = this.body;\n      removeClass(body, CLASS_OPEN);\n      body.style.paddingRight = this.initialBodyPaddingRight;\n    },\n    shown: function shown() {\n      var element = this.element,\n          options = this.options,\n          viewer = this.viewer;\n      this.fulled = true;\n      this.isShown = true;\n      this.render();\n      this.bind();\n      this.showing = false;\n\n      if (options.focus) {\n        viewer.focus();\n        this.enforceFocus();\n      }\n\n      if (isFunction(options.shown)) {\n        addListener(element, EVENT_SHOWN, options.shown, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_SHOWN) === false) {\n        return;\n      }\n\n      if (this.ready && this.isShown && !this.hiding) {\n        this.view(this.index);\n      }\n    },\n    hidden: function hidden() {\n      var element = this.element,\n          options = this.options,\n          viewer = this.viewer;\n\n      if (options.fucus) {\n        this.clearEnforceFocus();\n      }\n\n      this.fulled = false;\n      this.viewed = false;\n      this.isShown = false;\n      this.close();\n      this.unbind();\n      addClass(viewer, CLASS_HIDE);\n      viewer.removeAttribute('role');\n      viewer.removeAttribute('aria-labelledby');\n      viewer.removeAttribute('aria-modal');\n      viewer.setAttribute('aria-hidden', true);\n      this.resetList();\n      this.resetImage();\n      this.hiding = false;\n\n      if (!this.destroyed) {\n        if (isFunction(options.hidden)) {\n          addListener(element, EVENT_HIDDEN, options.hidden, {\n            once: true\n          });\n        }\n\n        dispatchEvent(element, EVENT_HIDDEN, null, {\n          cancelable: false\n        });\n      }\n    },\n    requestFullscreen: function requestFullscreen() {\n      var document = this.element.ownerDocument;\n\n      if (this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n        var documentElement = document.documentElement; // Element.requestFullscreen()\n\n        if (documentElement.requestFullscreen) {\n          documentElement.requestFullscreen();\n        } else if (documentElement.webkitRequestFullscreen) {\n          documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        } else if (documentElement.mozRequestFullScreen) {\n          documentElement.mozRequestFullScreen();\n        } else if (documentElement.msRequestFullscreen) {\n          documentElement.msRequestFullscreen();\n        }\n      }\n    },\n    exitFullscreen: function exitFullscreen() {\n      var document = this.element.ownerDocument;\n\n      if (this.fulled && (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n        // Document.exitFullscreen()\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        }\n      }\n    },\n    change: function change(event) {\n      var options = this.options,\n          pointers = this.pointers;\n      var pointer = pointers[Object.keys(pointers)[0]]; // In the case of the `pointers` object is empty (#421)\n\n      if (!pointer) {\n        return;\n      }\n\n      var offsetX = pointer.endX - pointer.startX;\n      var offsetY = pointer.endY - pointer.startY;\n\n      switch (this.action) {\n        // Move the current image\n        case ACTION_MOVE:\n          this.move(offsetX, offsetY, event);\n          break;\n        // Zoom the current image\n\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), false, event);\n          break;\n\n        case ACTION_SWITCH:\n          {\n            this.action = 'switched';\n            var absoluteOffsetX = Math.abs(offsetX);\n\n            if (absoluteOffsetX > 1 && absoluteOffsetX > Math.abs(offsetY)) {\n              // Empty `pointers` as `touchend` event will not be fired after swiped in iOS browsers.\n              this.pointers = {};\n\n              if (offsetX > 1) {\n                this.prev(options.loop);\n              } else if (offsetX < -1) {\n                this.next(options.loop);\n              }\n            }\n\n            break;\n          }\n      } // Override\n\n\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    },\n    isSwitchable: function isSwitchable() {\n      var imageData = this.imageData,\n          viewerData = this.viewerData;\n      return this.length > 1 && imageData.x >= 0 && imageData.y >= 0 && imageData.width <= viewerData.width && imageData.height <= viewerData.height;\n    }\n  };\n\n  var AnotherViewer = WINDOW.Viewer;\n\n  var getUniqueID = function (id) {\n    return function () {\n      id += 1;\n      return id;\n    };\n  }(-1);\n\n  var Viewer = /*#__PURE__*/function () {\n    /**\n     * Create a new Viewer.\n     * @param {Element} element - The target element for viewing.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Viewer(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Viewer);\n\n      if (!element || element.nodeType !== 1) {\n        throw new Error('The first argument is required and must be an element.');\n      }\n\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.action = false;\n      this.fading = false;\n      this.fulled = false;\n      this.hiding = false;\n      this.imageClicked = false;\n      this.imageData = {};\n      this.index = this.options.initialViewIndex;\n      this.isImg = false;\n      this.isShown = false;\n      this.length = 0;\n      this.moving = false;\n      this.played = false;\n      this.playing = false;\n      this.pointers = {};\n      this.ready = false;\n      this.rotating = false;\n      this.scaling = false;\n      this.showing = false;\n      this.timeout = false;\n      this.tooltipping = false;\n      this.viewed = false;\n      this.viewing = false;\n      this.wheeling = false;\n      this.zooming = false;\n      this.id = getUniqueID();\n      this.init();\n    }\n\n    _createClass(Viewer, [{\n      key: \"init\",\n      value: function init() {\n        var _this = this;\n\n        var element = this.element,\n            options = this.options;\n\n        if (element[NAMESPACE]) {\n          return;\n        }\n\n        element[NAMESPACE] = this; // The `focus` option requires the `keyboard` option set to `true`.\n\n        if (options.focus && !options.keyboard) {\n          options.focus = false;\n        }\n\n        var isImg = element.localName === 'img';\n        var images = [];\n        forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n          if (isFunction(options.filter)) {\n            if (options.filter.call(_this, image)) {\n              images.push(image);\n            }\n          } else if (_this.getImageURL(image)) {\n            images.push(image);\n          }\n        });\n        this.isImg = isImg;\n        this.length = images.length;\n        this.images = images;\n        this.initBody(); // Override `transition` option if it is not supported\n\n        if (isUndefined(document.createElement(NAMESPACE).style.transition)) {\n          options.transition = false;\n        }\n\n        if (options.inline) {\n          var count = 0;\n\n          var progress = function progress() {\n            count += 1;\n\n            if (count === _this.length) {\n              var timeout;\n              _this.initializing = false;\n              _this.delaying = {\n                abort: function abort() {\n                  clearTimeout(timeout);\n                }\n              }; // build asynchronously to keep `this.viewer` is accessible in `ready` event handler.\n\n              timeout = setTimeout(function () {\n                _this.delaying = false;\n\n                _this.build();\n              }, 0);\n            }\n          };\n\n          this.initializing = {\n            abort: function abort() {\n              forEach(images, function (image) {\n                if (!image.complete) {\n                  removeListener(image, EVENT_LOAD, progress);\n                }\n              });\n            }\n          };\n          forEach(images, function (image) {\n            if (image.complete) {\n              progress();\n            } else {\n              addListener(image, EVENT_LOAD, progress, {\n                once: true\n              });\n            }\n          });\n        } else {\n          addListener(element, EVENT_CLICK, this.onStart = function (_ref) {\n            var target = _ref.target;\n\n            if (target.localName === 'img' && (!isFunction(options.filter) || options.filter.call(_this, target))) {\n              _this.view(_this.images.indexOf(target));\n            }\n          });\n        }\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (this.ready) {\n          return;\n        }\n\n        var element = this.element,\n            options = this.options;\n        var parent = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var viewer = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var title = viewer.querySelector(\".\".concat(NAMESPACE, \"-title\"));\n        var toolbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-toolbar\"));\n        var navbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-navbar\"));\n        var button = viewer.querySelector(\".\".concat(NAMESPACE, \"-button\"));\n        var canvas = viewer.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        this.parent = parent;\n        this.viewer = viewer;\n        this.title = title;\n        this.toolbar = toolbar;\n        this.navbar = navbar;\n        this.button = button;\n        this.canvas = canvas;\n        this.footer = viewer.querySelector(\".\".concat(NAMESPACE, \"-footer\"));\n        this.tooltipBox = viewer.querySelector(\".\".concat(NAMESPACE, \"-tooltip\"));\n        this.player = viewer.querySelector(\".\".concat(NAMESPACE, \"-player\"));\n        this.list = viewer.querySelector(\".\".concat(NAMESPACE, \"-list\"));\n        viewer.id = \"\".concat(NAMESPACE).concat(this.id);\n        title.id = \"\".concat(NAMESPACE, \"Title\").concat(this.id);\n        addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(Array.isArray(options.title) ? options.title[0] : options.title));\n        addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n        toggleClass(button, CLASS_HIDE, !options.button);\n\n        if (options.keyboard) {\n          button.setAttribute('tabindex', 0);\n        }\n\n        if (options.backdrop) {\n          addClass(viewer, \"\".concat(NAMESPACE, \"-backdrop\"));\n\n          if (!options.inline && options.backdrop !== 'static') {\n            setData(canvas, DATA_ACTION, 'hide');\n          }\n        }\n\n        if (isString(options.className) && options.className) {\n          // In case there are multiple class names\n          options.className.split(REGEXP_SPACES).forEach(function (className) {\n            addClass(viewer, className);\n          });\n        }\n\n        if (options.toolbar) {\n          var list = document.createElement('ul');\n          var custom = isPlainObject(options.toolbar);\n          var zoomButtons = BUTTONS.slice(0, 3);\n          var rotateButtons = BUTTONS.slice(7, 9);\n          var scaleButtons = BUTTONS.slice(9);\n\n          if (!custom) {\n            addClass(toolbar, getResponsiveClass(options.toolbar));\n          }\n\n          forEach(custom ? options.toolbar : BUTTONS, function (value, index) {\n            var deep = custom && isPlainObject(value);\n            var name = custom ? hyphenate(index) : value;\n            var show = deep && !isUndefined(value.show) ? value.show : value;\n\n            if (!show || !options.zoomable && zoomButtons.indexOf(name) !== -1 || !options.rotatable && rotateButtons.indexOf(name) !== -1 || !options.scalable && scaleButtons.indexOf(name) !== -1) {\n              return;\n            }\n\n            var size = deep && !isUndefined(value.size) ? value.size : value;\n            var click = deep && !isUndefined(value.click) ? value.click : value;\n            var item = document.createElement('li');\n\n            if (options.keyboard) {\n              item.setAttribute('tabindex', 0);\n            }\n\n            item.setAttribute('role', 'button');\n            addClass(item, \"\".concat(NAMESPACE, \"-\").concat(name));\n\n            if (!isFunction(click)) {\n              setData(item, DATA_ACTION, name);\n            }\n\n            if (isNumber(show)) {\n              addClass(item, getResponsiveClass(show));\n            }\n\n            if (['small', 'large'].indexOf(size) !== -1) {\n              addClass(item, \"\".concat(NAMESPACE, \"-\").concat(size));\n            } else if (name === 'play') {\n              addClass(item, \"\".concat(NAMESPACE, \"-large\"));\n            }\n\n            if (isFunction(click)) {\n              addListener(item, EVENT_CLICK, click);\n            }\n\n            list.appendChild(item);\n          });\n          toolbar.appendChild(list);\n        } else {\n          addClass(toolbar, CLASS_HIDE);\n        }\n\n        if (!options.rotatable) {\n          var rotates = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n          addClass(rotates, CLASS_INVISIBLE);\n          forEach(rotates, function (rotate) {\n            toolbar.appendChild(rotate);\n          });\n        }\n\n        if (options.inline) {\n          addClass(button, CLASS_FULLSCREEN);\n          setStyle(viewer, {\n            zIndex: options.zIndexInline\n          });\n\n          if (window.getComputedStyle(parent).position === 'static') {\n            setStyle(parent, {\n              position: 'relative'\n            });\n          }\n\n          parent.insertBefore(viewer, element.nextSibling);\n        } else {\n          addClass(button, CLASS_CLOSE);\n          addClass(viewer, CLASS_FIXED);\n          addClass(viewer, CLASS_FADE);\n          addClass(viewer, CLASS_HIDE);\n          setStyle(viewer, {\n            zIndex: options.zIndex\n          });\n          var container = options.container;\n\n          if (isString(container)) {\n            container = element.ownerDocument.querySelector(container);\n          }\n\n          if (!container) {\n            container = this.body;\n          }\n\n          container.appendChild(viewer);\n        }\n\n        if (options.inline) {\n          this.render();\n          this.bind();\n          this.isShown = true;\n        }\n\n        this.ready = true;\n\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n\n        if (dispatchEvent(element, EVENT_READY) === false) {\n          this.ready = false;\n          return;\n        }\n\n        if (this.ready && options.inline) {\n          this.view(this.index);\n        }\n      }\n      /**\n       * Get the no conflict viewer class.\n       * @returns {Viewer} The viewer class.\n       */\n\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Viewer = AnotherViewer;\n        return Viewer;\n      }\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n\n    return Viewer;\n  }();\n\n  assign(Viewer.prototype, render, events, handlers, methods, others);\n\n  return Viewer;\n\n})));\n","import Viewer from 'viewerjs';\nconst gallery = new Viewer(document.getElementById('images'), {\n  title: [\n    4,\n    (image, imageData) => `${image.alt} (${imageData.naturalWidth} × ${imageData.naturalHeight})`,\n  ],\n});\n"]}